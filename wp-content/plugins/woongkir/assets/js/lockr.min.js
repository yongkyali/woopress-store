!function(t,r){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=r(t,exports)):"function"==typeof define&&define.amd?define(["exports"],function(e){t.Lockr=r(t,e)}):t.Lockr=r(t,{})}(this,function(e,c){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1}),c.prefix="",c._getPrefixedKey=function(e,t){return(t=t||{}).noPrefix?e:this.prefix+e},c.set=function(t,r,e){var o=this._getPrefixedKey(t,e);try{localStorage.setItem(o,JSON.stringify({data:r}))}catch(e){console&&console.warn("Lockr didn't successfully save the '{"+t+": "+r+"}' pair, because the localStorage is full.")}},c.get=function(e,t,r){var o,n=this._getPrefixedKey(e,r);try{o=JSON.parse(localStorage.getItem(n))}catch(e){o=localStorage[n]?{data:localStorage.getItem(n)}:null}return o?"object"==typeof o&&void 0!==o.data?o.data:void 0:t},c.sadd=function(t,r,e){var o,n=this._getPrefixedKey(t,e),a=c.smembers(t);if(-1<a.indexOf(r))return null;try{a.push(r),o=JSON.stringify({data:a}),localStorage.setItem(n,o)}catch(e){console.log(e),console&&console.warn("Lockr didn't successfully add the "+r+" to "+t+" set, because the localStorage is full.")}},c.smembers=function(e,t){var r,o=this._getPrefixedKey(e,t);try{r=JSON.parse(localStorage.getItem(o))}catch(e){r=null}return r&&r.data?r.data:[]},c.sismember=function(e,t,r){return-1<c.smembers(e).indexOf(t)},c.keys=function(){var t=[],e=Object.keys(localStorage);return 0===c.prefix.length?e:(e.forEach(function(e){-1!==e.indexOf(c.prefix)&&t.push(e.replace(c.prefix,""))}),t)},c.getAll=function(e){var t=c.keys();return e?t.reduce(function(e,t){var r={};return r[t]=c.get(t),e.push(r),e},[]):t.map(function(e){return c.get(e)})},c.srem=function(t,r,e){var o,n,a=this._getPrefixedKey(t,e),i=c.smembers(t,r);-1<(n=i.indexOf(r))&&i.splice(n,1),o=JSON.stringify({data:i});try{localStorage.setItem(a,o)}catch(e){console&&console.warn("Lockr couldn't remove the "+r+" from the set "+t)}},c.rm=function(e){var t=this._getPrefixedKey(e);localStorage.removeItem(t)},c.flush=function(){c.prefix.length?c.keys().forEach(function(e){localStorage.removeItem(c._getPrefixedKey(e))}):localStorage.clear()},c});